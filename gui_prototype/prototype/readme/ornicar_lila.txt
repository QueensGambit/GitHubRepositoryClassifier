b'[lichess.org](https://lichess.org) [![Build Status](https://travis-ci.org/ornicar/lila.svg?branch=master)](https://travis-ci.org/ornicar/lila)\n---------------------------------\n\n[@lichessorg](https://twitter.com/lichessorg)\n\n<img src="https://raw.githubusercontent.com/ornicar/lila/master/public/images/homepage_light.1200.png" alt="lichess.org" />\n\nLila is a free online chess game server focused on [realtime](https://lichess.org/games) gameplay and ease of use.\n\nIt features a [search engine](https://lichess.org/games/search),\n[computer analysis](https://lichess.org/ief49lif) distributed with [fishnet](https://github.com/niklasf/fishnet),\n[tournaments](https://lichess.org/tournament),\n[simuls](https://lichess.org/simul),\n[forums](https://lichess.org/forum),\n[teams](https://lichess.org/team),\n[tactic trainer](https://lichess.org/training),\n[opening trainer](https://lichess.org/training/opening),\na [mobile app](https://lichess.org/mobile),\nand a [shared analysis board](https://lichess.org/study).\nThe UI is available in more than [80 languages](https://lichess.org/translation/contribute) thanks to the community.\n\nLichess is written in [Scala 2.11](https://www.scala-lang.org/),\nand relies on [Play 2.3](https://www.playframework.com/) for the routing, templating, and JSON.\nPure chess logic is contained in [scalachess](https://github.com/ornicar/scalachess) submodule.\nThe codebase is fully asynchronous, making heavy use of Scala Futures and [Akka 2 actors](http://akka.io).\nLichess talks to [Stockfish](http://stockfishchess.org/) deployed in an AI cluster of donated servers.\nIt uses [MongoDB 2.6](https://mongodb.org) to store more than 68 million games, which are indexed by [elasticsearch](http://elasticsearch.org).\nHTTP requests and websocket connections are proxied by [nginx 1.6](http://nginx.org).\nClient-side is written in [mithril.js](http://mithril.js.org/).\nThe [blog](https://lichess.org/blog) uses a free open content plan from [prismic.io](https://prismic.io).\n\nJoin us on #lichess IRC channel on freenode for more info.\nUse [github issues](https://github.com/ornicar/lila/issues) for bug reports and feature requests.\n\nInstallation\n------------\n\n> If you want to add a live chess section to your website, you are welcome to [embed lichess](https://lichess.org/developers) into your website. It\'s very easy to do.\n\n> This project source code is open for other developers to have an example of non-trivial scala/play2/mongodb application. You\'re welcome to reuse as much code as you want for your projects and to get inspired by the solutions I propose to many common web development problems. But please don\'t just create a public lichess clone. Instead, [embed lichess using an &lt;iframe&gt;](https://lichess.org/developers) into your website.\n\n> Also note that if I provide the source code, I do **not** offer support for your lichess instance. I will probably ignore any question about lichess installation and runtime issues.\n\n## HTTP API\n\nFeel free to use lichess API in your applications and websites.\n\nIf the resource you need is not available yet,\ndrop us an email at contact@lichess.org and we\'ll discuss it.\n\n### API Limits\n\nTo respect the API servers and avoid an IP ban, please wait 1 second between requests.\nIf you receive an HTTP response with a [429 status](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#429), please wait a full minute before resuming API usage.\n\nPlease do not automate computer analysis requests. They\'re very expensive.\n\n### `GET /api/user/<username>` fetch one user\n\n```\n> curl https://en.lichess.org/api/user/thibault\n```\n\n```javascript\n{\n  "username": "thibault",\n  "title": null,                             // chess title like FM or LM (lichess master)\n  "url": "https://lichess.org/@/thibault",   // profile url\n  "online": true,                            // is the player currently using lichess?\n  "playing": "https://lichess.org/abcdefgh", // game being played, if any\n  "engine": false,                           // true if the user is known to use a chess engine\n  "language": "en",                          // prefered language\n  "profile": {\n    "bio": "Writes bugs for free",\n    "country": "FR",\n    "firstName": "Thibault",\n    "lastName": "Duplessis",\n    "location": "Paris"\n  },\n  "perfs": {                                 // user performances in different games\n    "bullet": {\n      "games": 35,                           // number of rated games played\n      "rating": 1624,                        // Glicko2 rating\n      "rd": 80,                              // Glicko2 rating deviation\n      "prog": -13                            // progress over the last twelve games\n    },\n    "chess960": {\n      "games": 1,\n      "rating": 1739,\n      "rd": 277,\n      "prog": 33\n    },\n    "classical": {\n      "games": 331,\n      "rating": 1603,\n      "rd": 65,\n      "prog": 9\n    },\n    "kingOfTheHill": {\n      "games": 3,\n      "rating": 1622,\n      "rd": 223,\n      "prog": -62\n    },\n    "puzzle": {\n      "games": 9,\n      "rating": 902,\n      "rd": 117,\n      "prog": -328\n    },\n    "threeCheck": {\n      "games": 1,\n      "rating": 1662,\n      "rd": 290\n    }\n  }\n}\n```\n\nExample usage with JSONP:\n\n```javascript\n$.ajax({\n  url:\'https://en.lichess.org/api/user/thibault\',\n  dataType:\'jsonp\',\n  jsonp:\'callback\',\n  success: function(data) {\n    // data is a javascript object, do something with it!\n    console.debug(JSON.stringify(data));\n  }\n});\n```\n\n### `GET /api/user` fetch many users\n\n```\n> curl https://en.lichess.org/api/user?team=coders&nb=10&page=1\n```\n\nThe team parameter is mandatory.\n\nname | type | default | description\n--- | --- | --- | ---\n**team** | string | - | filter users by team\n**nb** | int | 10 | maximum number of users to return per page\n**page** | int | 1 | for pagination\n\n```javascript\n{\n  "currentPage": 3,\n  "previousPage": 2,\n  "nextPage": 4,\n  "maxPerPage": 100,\n  "nbPages": 43,\n  "nbResults": 4348,\n  "currentPageResults": [\n    {\n      ... // see user document above\n    },\n    ... // other users\n  ]\n}\n```\n\nExample usage with JSONP:\n\n```javascript\n$.ajax({\n  url:\'https://en.lichess.org/api/user\',\n  data: {\n    team: \'coders\',\n    nb: 100\n  },\n  dataType:\'jsonp\',\n  jsonp:\'callback\',\n  success: function(data) {\n    // data is a javascript object, do something with it!\n    console.debug(JSON.stringify(data.list));\n  }\n});\n```\n\n### `GET /api/user/<username>/games` fetch user games\n\n```\n> curl https://en.lichess.org/api/user/thibault/games?nb=10&page=2\n```\n\nGames are returned by descendant chronological order.\nAll parameters are optional.\n\nname | type | default | description\n--- | --- | --- | ---\n**nb** | int | 10 | maximum number of games to return per page\n**page** | int | 1 | for pagination\n**with_analysis** | 1 or 0 | 0 | include deep analysis data in the result\n**with_moves** | 1 or 0 | 0 | include a list of PGN moves\n**with_opening** | 1 or 0 | 0 | include opening informations\n**with_movetimes** | 1 or 0 | 0 | include move time informations\n**rated** | 1 or 0 | - | rated games only\n**playing** | 1 or 0 | - | games in progress only\n\n```javascript\n{\n  "currentPage": 3,\n  "previousPage": 2,\n  "nextPage": 4,\n  "maxPerPage": 100,\n  "nbPages": 43,\n  "nbResults": 4348,\n  "currentPageResults": [\n    {\n      "id": "39b12Ikl",\n      "variant": "chess960", // standard/chess960/fromPosition/kingOfTheHill/threeCheck\n      "speed": "blitz", // bullet|blitz|classical|unlimited\n      "perf": "chess960", // bullet|blitz|classical|chess960|kingOfTheHill|threeCheck\n      "rated": true,\n      "status": "mate", // (1)\n      "clock":{          // all clock values are expressed in seconds\n        "initial": 300,\n        "increment": 8,\n        "totalTime": 620  // evaluation of the game duration = initial + 40 * increment\n      },\n      "createdAt": 1389100907239,\n      "lastMoveAt": 1389100907239,\n      "turns": 44,\n      "color": "white", // color who plays next\n      "url": "https://lichess.org/x2kpaixn",\n      "winner": "black",\n      "players": {\n        "white": {\n          "userId": "thibault",\n          "name": "Thibault D", // only in the case of imported game\n          "rating": 1642,\n          "analysis": {\n            "blunder": 1,\n            "inaccuracy": 0,\n            "mistake": 2\n          },\n        // rounded move times in tenths of seconds\n        "moveTimes":[30,40,10,40,40,100,50,200,400,150,150,40,50,200,80]\n        },\n        "black": ... // other player\n      }\n      "analysis": [ // only if the with_analysis flag is set\n        {\n          "eval": -26, // board evaluation in centipawns\n          "move": "e4"\n        },\n        {\n          "eval": -8,\n          "move": "b5"\n        },\n        {\n          "eval": -66,\n          "move": "Nfe3",\n          "variation": "c4 bxc4 Nfe3 c5 Qf1 f6 Rxc4 Bb7 b4 Ba6"\n        },\n        // ... more moves\n      ],\n      "moves": "Nf3 d5 g3 e6 Bg2 Be7 d3 Nf6 Nbd2 O-O O-O c6 Rfe1 b6 e4 Bb7", // with_moves flag\n      "opening": { // with_opening flag\n        "code": "A07",\n        "name": "King\'s Indian Attack, General"\n      }\n    },\n    {\n      ... // other game\n    }\n  ]\n}\n```\n\n(1) All game statuses: https://github.com/ornicar/scalachess/blob/master/src/main/scala/Status.scala#L16-L25\n\n### `GET /api/game/{id}` fetch one game by ID\n\n```\n> curl https://en.lichess.org/api/game/x2kpaixn\n```\n\nA single game is returned.\nAll parameters are optional.\n\nname | type | default | description\n--- | --- | --- | ---\n**with_analysis** | 1 or 0 | 0 | include deep analysis data in the result\n**with_moves** | 1 or 0 | 0 | include a list of PGN moves\n**with_movetimes** | 1 or 0 | 0 | include move time informations\n**with_opening** | 1 or 0 | 0 | include opening informations\n**with_fens** | 1 or 0 | 0 | include a list of FEN states\n\n```javascript\n{\n  "id": "39b12Ikl",\n  "initialFen": "rkrqnnbb/pppppppp/8/8/8/8/PPPPPPPP/RKRQNNBB w KQkq - 0 1" // omitted is standard\n  "variant": "chess960", // standard/chess960/fromPosition/kingofthehill/threeCheck\n  "speed": "blitz", // bullet|blitz|classical|unlimited\n  "perf": "chess960", // bullet|blitz|classical|chess960|kingOfTheHill|threeCheck\n  "rated": true,\n  "status": "mate", // (1)\n  "clock":{          // all clock values are expressed in seconds\n    "initial": 300,\n    "increment": 8,\n    "totalTime": 620  // evaluation of the game duration = initial + 40 * increment\n  },\n  "createdAt": 1389100907239,\n  "lastMoveAt": 1389100907239,\n  "turns": 44,\n  "color": "white", // color who plays next\n  "url": "https://lichess.org/x2kpaixn",\n  "winner": "black",\n  "players": {\n    "white": {\n      "userId": "thibault",\n      "name": "Thibault D", // only in the case of imported game\n      "rating": 1642,\n      "analysis": {\n        "blunder": 1,\n        "inaccuracy": 0,\n        "mistake": 2\n      },\n      // rounded move times in tenths of seconds\n      "moveTimes":[30,40,10,40,40,100,50,200,400,150,150,40,50,200,80]\n    },\n    "black": ... // other player\n  },\n  "analysis": [ // only if the with_analysis flag is set\n    {\n      "eval": -26, // board evaluation in centipawns\n      "move": "e4"\n    },\n    {\n      "eval": -8,\n      "move": "b5"\n    },\n    {\n      "eval": -66,\n      "move": "Nfe3",\n      "variation": "c4 bxc4 Nfe3 c5 Qf1 f6 Rxc4 Bb7 b4 Ba6"\n    },\n    // ... more moves\n  ],\n  "moves": "Nf3 d5 g3 e6 Bg2 Be7 d3 Nf6 Nbd2 O-O O-O c6 Rfe1 b6 e4 Bb7", // with_moves flag\n  "opening": { // with_opening flag\n    "code": "A07",\n    "name": "King\'s Indian Attack, General"\n  }\n  "fens": [ // only if with_fens flag is set\n      "rnbqkbnr/pppppppp/8/8/8/5N2/PPPPPPPP/RNBQKB1R",\n      "rnbqkbnr/ppp1pppp/8/3p4/8/5N2/PPPPPPPP/RNBQKB1R",\n      "rnbqkbnr/ppp1pppp/8/3p4/8/5NP1/PPPPPP1P/RNBQKB1R",\n      "rnbqkbnr/ppp2ppp/4p3/3p4/8/5NP1/PPPPPP1P/RNBQKB1R",\n      "rnbqkbnr/ppp2ppp/4p3/3p4/8/5NP1/PPPPPPBP/RNBQK2R",\n      "rnbqk1nr/ppp1bppp/4p3/3p4/8/5NP1/PPPPPPBP/RNBQK2R",\n      // ... more fens\n  ]\n}\n```\n\n(1) All game statuses: https://github.com/ornicar/scalachess/blob/master/src/main/scala/Status.scala#L16-L25\n\n### `GET /game/export/{id}.pgn` fetch one game PGN by ID\n\nhttps://en.lichess.org/game/export/Qa7FJNk2.pgn\n\nThis returns the raw PGN for a game.\n\n```\n[Event "Rated game"]\n[Site "https://lichess.org/Qa7FJNk2"]\n[Date "2014.06.12"]\n[White "onpurplesz"]\n[Black "LauraSchmidt"]\n[Result "1-0"]\n[WhiteElo "1516"]\n[BlackElo "1698"]\n[PlyCount "37"]\n[Variant "Standard"]\n[TimeControl "1020+0"]\n[ECO "C50"]\n[Opening "Italian Game, General"]\n[WhiteClock ":11:9"]\n[BlackClock ":14:6"]\n[Annotator "lichess.org"]\n\n1. e4 e5 2. Nf3 Nc6 3. Bc4 { Italian Game, General } Qf6?! { (0.13 \xe2\x86\x92 0.98) Inaccuracy. Best move was Nf6. } (3... Nf6 4. d3 Bc5 5. O-O O-O 6. Bg5 Be7 7. a3 d6 8. h3 a6) 4. d3 h6 5. Be3 d6 6. h3?! { (0.84 \xe2\x86\x92 0.31) Inaccuracy. The best move was Nc3. } (6. Nc3 Be6 7. Nd5 Qd8 8. d4 exd4 9. Nxd4 Nxd4 10. Qxd4 c6 11. Nc3 Bxc4 12. Qxc4 Nf6 13. O-O Be7) 6... a6 7. Nbd2 Be6 8. Qe2 Bxc4 9. Nxc4 Nge7 10. a3 Nd4?! { (0.29 \xe2\x86\x92 0.79) Inaccuracy. The best move was O-O-O. } (10... O-O-O 11. O-O g5 12. a4 Bg7 13. Bd2 Kb8 14. Rae1 Qe6 15. b4 f5 16. b5 fxe4) 11. Bxd4 exd4 12. O-O-O Nc6 13. Rhe1 O-O-O 14. e5 dxe5 15. Nfxe5 Nxe5 16. Qxe5 Qxe5? { (0.35 \xe2\x86\x92 1.78) Mistake. The best move was Qxf2. } (16... Qxf2 17. Re2 Qf6 18. Qxf6 gxf6 19. Rf1 Bg7 20. Nd2 h5 21. Ne4 Rhe8 22. Ref2 Re5 23. b3 Rdd5 24. Kb2) 17. Nxe5 Rg8?! { (1.76 \xe2\x86\x92 2.32) Inaccuracy. The best move was Rd7. } (17... Rd7 18. Nxd7 Kxd7 19. Re4 c5 20. c3 dxc3 21. bxc3 Bd6 22. Kc2 b5 23. a4 Ra8 24. d4 Kc6 25. dxc5) 18. Nxf7 Rd7? { (2.35 \xe2\x86\x92 Mate in 2) Checkmate is now unavoidable. The best move was Rd5. } (18... Rd5 19. Re8+ Kd7 20. Rde1 Bb4 21. Rxg8 Bxe1 22. Rxg7 Bxf2 23. Nxh6+ Kc6 24. Kd1 Rb5 25. b3 Rh5 26. Nf7) 19. Re8+ { Black resigns } 1-0\n```\n\n### `GET /api/tournament` fetch current tournaments\n\nReturns tournaments displayed on the schedule: https://lichess.org/tournament\n\n```\n> curl https://en.lichess.org/api/tournament\n```\n\n```javascript\n{\n  "created": [\n    {\n      "id": "f4wnl48m",\n      "createdBy": "thedave13213",\n      "system": "arena",\n      "minutes": 45,\n      "clock": {\n        "limit": 120,\n        "increment": 0\n      },\n      "position": null,\n      "rated": true,\n      "fullName": "Ulrich Arena",\n      "nbPlayers": 1,\n      "private": false,\n      "variant": {\n        "key": "standard",\n        "short": "Std",\n        "name": "Standard"\n      },\n      "secondsToStart": 38,\n      "startsAt": 1471257146633,\n      "finishesAt": 1471259846633,\n      "status": 10,\n      "schedule": null,\n      "winner": null,\n      "conditions": null,\n      "perf": {\n        "icon": "T",\n        "name": "Bullet",\n        "position": 0\n      }\n    }\n  ],\n  "started": [\n    ...\n  ],\n  "finished": [\n    ...\n  ]\n}\n```\n\nJSONP is available.\n\n### `GET /api/tournament/<tournamentId>` fetch one tournament\n\nReturns tournament info, and a page of the tournament standing\n\nname | type | default | description\n--- | --- | --- | ---\n**page** | int | 1 | for standing pagination\n\n```\ncurl \'https://en.lichess.org/api/tournament/x5WNIngd?page=1\'\n```\n\n```javascript\n{\n  "clock": {\n    "increment": 0,\n    "limit": 300\n  },\n  "createdBy": "lichess",\n  "fullName": "Hourly Blitz Arena",\n  "id": "x5WNIngd",\n  "isFinished": true,\n  "isStarted": false,\n  "minutes": 56,\n  "nbPlayers": 128,\n  "next": {\n    "finishesAt": null,\n    "id": "dNivtcYG",\n    "name": "Hourly SuperBlitz Arena",\n    "nbPlayers": 0,\n    "perf": {\n      "icon": ")",\n      "name": "Blitz"\n    },\n    "startsAt": "2016-08-15T11:00:00.000Z"\n  },\n  "startsAt": "2016-05-25T22:00:00.000Z",\n  "system": "arena",\n  "variant": "standard",\n  "verdicts": {\n    "accepted": true,\n    "list": []\n  }\n  "pairings": [\n    {\n      "id": "gtFxbHU8",\n      "s": 3,\n      "u": ["nimsraw", "Ernom"]\n    },\n    {\n      "id": "oyl3n1bB",\n      "s": 3,\n      "u": ["esparzaesc72", "athletics_champ"]\n    },\n    ...\n  ],\n  "perf": {\n    "icon": ")",\n    "name": "Blitz"\n  },\n  "podium": [\n    {\n      "name": "athletics_champ",\n      "nb": {\n        "berserk": 0,\n        "game": 7,\n        "win": 7\n      },\n      "performance": 2297,\n      "rank": 1,\n      "rating": 2100,\n      "ratingDiff": 37,\n      "score": 24,\n      "sheet": {\n      "fire": true,\n      "scores": [\n        [2, 2],\n        ...\n      ]\n    },\n    ...\n  ],\n  "schedule": {\n    "freq": "hourly",\n    "speed": "blitz"\n  },\n  "standing": {\n    "page": 1,\n    "players": [\n      {\n        "name": "athletics_champ",\n        "rank": 1,\n        "rating": 2100,\n        "ratingDiff": 37,\n        "score": 24,\n        "sheet": {\n          "fire": true,\n          "scores": [\n            [2, 2 ],\n            ...\n          ]\n        }\n      },\n      ...\n    ]\n  }\n}\n```\n\nJSONP is available.\n\nCredits\n-------\n\nSee the [lichess Thanks page](https://lichess.org/thanks)\n\nSupported browsers\n------------------\n\n- Firefox, 6 months old or newer\n- Chrome, 6 months old or newer\n\nThese two are the best, hands down. Use them if you can.\n\nWe also do our best to support:\n\n- Internet Explorer 11\n- Microsoft Edge\n- Opera 34 and newer\n- Safari 9 and newer\n\nOthers and older browsers are guaranteed not to work with lichess and we don\'t care.\n\nLicence\n-------\n\nLila is licensed under the GNU Affero General Public License 3 or any later\nversion at your choice with an exception for Highcharts. See COPYING for\ndetails.\n'