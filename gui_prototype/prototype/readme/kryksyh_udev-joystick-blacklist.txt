b'# udev-joystick-blacklist\n\nFix for keyboard/mouse/tablet being detected as joystick in Linux.\n\nThere are several devices that, although recognized by kernel as joysticks, are not joysticks. This repository contains rules that will prevent the non-functional `/dev/input/js*` and `/dev/input/event*` devices from being used, by removing read/write permissions from them.\n\nThis is just a blacklist, which will always be incomplete (until the actual bug gets fixed). Feel free to add more devices to this list.\n\n## How to install\n\n### Version that changes permissions to 0000\n\n    sudo curl -o /etc/udev/rules.d/51-these-are-not-joysticks.rules \\\n      https://raw.githubusercontent.com/denilsonsa/udev-joystick-blacklist/master/51-these-are-not-joysticks.rules\n\n### Version that removes the device\n\n    sudo curl -o /etc/udev/rules.d/51-these-are-not-joysticks-rm.rules \\\n      https://raw.githubusercontent.com/denilsonsa/udev-joystick-blacklist/master/51-these-are-not-joysticks-rm.rules\n\n### Which version should I use?\n\nPersonally, I\'d try the first version (that sets permissions to `0000`) first. If it does not work or if it gives trouble for some reason, I\'d try the second version (that removes the device).\n\nThe first version (that sets permissions to `0000`) seems to work fine across several distros, but some distros ([such as OSMC](https://github.com/denilsonsa/udev-joystick-blacklist/issues/5#issuecomment-151872841)) may have additional rules that end up setting the permssions back to another value. In such case, the second version (that removes the device) should work.\n\nIn the end, it\'s up to you, and it\'s about what works best for you and your system.\n\n## How it works\n\n### Matching\n\nA rule will match if:\n\n* The subsystem is `input`;\n* The pair `idVendor` and `idProduct` is in this list;\n* Either one of:\n    * The device property `ID_INPUT_JOYSTICK` is set;\n    * Or the device name matches `js[0-9]*`.\n\n### Actions\n\nThe following actions are taken on each matching rule:\n\n* Clears `ID_INPUT_JOYSTICK` property, which prevents [some `/lib/udev/rules.d/*` rules from running](https://github.com/denilsonsa/udev-joystick-blacklist/issues/5#issuecomment-151832071).\n* Depending on which version you installed:\n    * [Removes read and write permissions by setting `MODE="0000"`](https://en.wikipedia.org/wiki/File_system_permissions#Numeric_notation). This effectively prevents the device from being used.\n    * Removes the device file from `/dev/input/`. This also prevents the device from being found or from being listed.\n\nIt is not possible to rename a device, so `NAME="not-a-joystick%n"` will not work.\n\n### Learning more about udev rules\n\n* Documentation: <http://www.freedesktop.org/software/systemd/man/udev.html> (and also the manpages installed on your system).\n* Debugging udev rules: <http://www.jpichon.net/blog/2011/12/debugging-udev-rules/>.\n* Nice (but outdated) udev tutorial: <http://www.reactivated.net/writing_udev_rules.html>.\n\n## Troubleshooting\n\nLook at the generated `/dev` files: `ls -l /dev/input/`\n\nUnplug and plug your USB device while monitoring for kernel and udev events: `udevadm monitor -p`\n\nLook for other udev rules that may interact with the same device: `grep -i \'\\bjs\\b\\|joystick\' /lib/udev/rules.d/* /etc/udev/rules.d/*`\n\n## Testing joystick detection\n\nThese tools list and interact with all available/detected joysticks:\n\n* **jstest-gtk**\n    * <https://github.com/Grumbel/jstest-gtk/>\n    * [Directly interacts with `/dev/input/js*` devices. No library is used.](https://github.com/Grumbel/jstest-gtk/blob/2355f44f571a6d5f4ff4dfaf3a27ee223fb91ed7/src/joystick.cpp#L43)\n    * [Detects up to 32 devices with `/dev/input/js*` path.](https://github.com/Grumbel/jstest-gtk/blob/2355f44f571a6d5f4ff4dfaf3a27ee223fb91ed7/src/joystick.cpp#L132)\n* **pygame-joystick-test.py**\n    * <https://bitbucket.org/denilsonsa/pygame-joystick-test/>\n    * <https://bitbucket.org/denilsonsa/pygame-joystick-test/src/default/pygame-joystick-test.py>\n    * Uses Python 2.x and [Pygame](http://www.pygame.org/), which uses [SDL](https://www.libsdl.org/).\n* **wine control.exe joy.cpl**\n    * <https://www.winehq.org/>\n    * The [Wine control panel](http://wiki.winehq.org/control) includes a *Game Controllers* configuration.\n* **steam -bigpicture**\n    * <http://store.steampowered.com/bigpicture>\n    * Valve\'s Steam \xe2\x86\x92 Big Picture mode \xe2\x86\x92 \xe2\x9a\x99 Settings \xe2\x86\x92 Controller.\n\n## Bug reports and mentions\n\nThere are reports of this issue on different distros and projects.\n\n* <https://bugzilla.kernel.org/show_bug.cgi?id=28912>\n* <https://bugzilla.kernel.org/show_bug.cgi?id=37982>\n* <https://bugs.launchpad.net/ubuntu/+source/linux/+bug/390959>\n* <https://askubuntu.com/questions/173376/how-do-i-disable-joystick-input>\n* <https://ryort.wordpress.com/2011/12/04/udev-and-the-microsoft-digital-media-keyboard-3000-wha/>\n* <https://forum.manjaro.org/index.php?topic=15275.msg144519#msg144519>\n* <https://bbs.archlinux.org/viewtopic.php?id=190485>\n* <https://bbs.archlinux.org/viewtopic.php?id=142469>\n* <https://forums.gentoo.org/viewtopic-t-362032.html>\n* <https://bugs.winehq.org/show_bug.cgi?id=35954>\n* <https://github.com/ValveSoftware/steam-for-linux/issues/3943>\n\n## Known devices\n\nFor the complete list, look at [`generate_rules.py`](generate_rules.py) script.\n\n* A4 Tech mouse and/or keyboard.\n* Microsoft mouse and/or keyboard.\n* Wacom tablets.\n* Cooler Master mouse.\n\n## Contributing\n\nThe best ways to contribute are by [creating a new issue][issues] or by [making a pull request][forking]. Make sure you mention the device name/description and the vendor/product IDs. The relevant line from `lsusb` output is usually enough.\n\nThis repository contains a list of devices compiled from contributions of several people. I cannot test every single device. If something does not work for you even after you have added the correct rules, please try debugging it on your own system. The output of `udevadm monitor -p` may prove very helpful. Also look at the output of `ls -l /dev/input/`.\n\n## History of this repository\n\nAfter suffering with this issue for a long time, I decided to investigate possible fixes and workarounds. Then, in May 2015, after searching a lot for a solution, I\'ve managed to create some udev rules that fixed the issue for my devices and decided to share this solution with other people. Initially, I shared [the simple file at GitHub Gist][gist]. Over time, people submitted contributions through comments, and keeping that file on Gist was becoming too hard to manage.\n\nIn October 2015, I decided to move the file to [this GitHub repository][github]. That way, it will be easier to make changes, to fork, to receive notifications, and essentially to maintain it.\n\nIdeally, the bug in the Linux kernel should be fixed, so that this repository (which is essentially just a workaround) wouldn\'t be needed anymore.\n\n## License\n\nPublic domain. Feel free to use this project for whatever purpose you want.\n\nAlso, feel free to contribute to the project. And, if you have the knowledge and the skills, consider fixing this bug in the Linux kernel itself.\n\nThere is no warranty implied by using this project. Use at your own risk.\n\n\n[gist]: https://gist.github.com/denilsonsa/978f1d842cf5430f57f6\n[github]: https://github.com/denilsonsa/udev-joystick-blacklist\n[issues]: https://github.com/denilsonsa/udev-joystick-blacklist/issues\n[forking]: https://guides.github.com/activities/forking/\n'