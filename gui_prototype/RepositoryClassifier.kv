#:import Clipboard kivy.core.clipboard.Clipboard

<ScrollableLabel>:
    Label:
        size_hint_y: None
        height: self.texture_size[1]
        text_size: self.width, None
        text: root.text
        color: 0, 0, 0, 1
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

<FileSaverPopup>
    title: "Save File"
    auto_dismiss: False
    size_hint: 0.5, 0.5

    filename_input: filename_input
    label_save: save_label

    BoxLayout:
        orientation: "vertical"
        FileChooserIconView:
            id: file_chooser
            on_selection: filename_input.text = self.selection and self.selection[0] or ''
        TextInput:
            id: filename_input
            size_hint_y: None
            height: 30
            multiline: False
            text: "rc_console.log"
        BoxLayout:
            size_hint_y: None
            height: 30
            Label:
                id: save_label
                size_hint_x: 2
                text: ""
                color: 1, 0, 0, 1
            Button:
                text: "save"
                on_release: root.save_file(file_chooser.path, filename_input.text)

            Button
                text: "cancel"
                on_release: root.dismiss()


<InfoPopup>
    title: "Information"
    auto_dismiss: True
    size_hint: .8, .8

    BoxLayout:
        orientation: "vertical"
        padding: 10
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                size: self.size
                pos: self.pos

        BoxLayout:
            orientation: "horizontal"
            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "[b]Realised at[/b]"
                    markup: True
                    color: 0, 0, 0, 1
                    size_hint_y: 0.1
                Image:
                    source: 'HFU.png'
            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "[b]Powered by[/b]"
                    markup: True
                    color: 0, 0, 0, 1
                    size_hint_y: 0.1
                Image:
                    source: 'github.png'
        Label:
            text: "[b]Using[/b]"
            markup: True
            color: 0, 0, 0, 1
            size_hint_y: .5
            text_size: self.size
            halign: 'center'
            valign: 'bottom'

        BoxLayout:
            orientation: "horizontal"
            spacing: 10
            padding:10

            Image:
                source: 'python.png'
            Image:
                source: 'kivy.png'
            Image:
                source: 'matplot.png'
            Image:
                source: 'scikit.png'

        Label:
            text: "[b]As an entry for the infoCup 2016/2017[/b]"
            markup: True
            color: 0, 0, 0, 1
            size_hint_y: .5
            text_size: self.size
            halign: 'center'
            valign: 'bottom'

        BoxLayout:
            orientation: "horizontal"
            Label:
                text: "[b]Created by[/b]\nBjoern Beha\nJohannes Czech\nLukas Scheuerle\nSuhay Sevinc"
                markup: True
                color: 0, 0, 0, 1
                valign: 'top'
                halign: 'center'
                text_size: self.size
            Image:
                source: 'gi.png'
            Label:
                text: "[b]Special thanks to[/b]\nProf. Dr. Friedbert Kaspar\nProf. Dr. Harald Glaeser"
                markup: True
                color: 0, 0, 0, 1
                valign: 'top'
                halign: 'center'
                text_size: self.size




<SettingsPopup>
    title: "Settings"
    auto_dismiss: True
    size_hint: .8, .2

    checkbox_api_token: use_api_key

    BoxLayout:
        orientation: "horizontal"
        spacing: 10
        padding: 10

        #size_hint_y: 0.6

        CheckBox:
            id: use_api_key
            size_hint_x: .1
            #active: True
            on_press: root.switch_api(self.active)

        BoxLayout:
            orientation: "horizontal"
            Label:
                text: '[i]use API Token (advanced, see documentation)[/i]'
                markup: True
                halign: 'left'
                valign: 'middle'
                text_size: self.size





GUILayout:

<GUILayout>:
    orientation: "vertical"
    spacing: 10

                                                            # definitions for program communication
    textfield_input: urlInput
    text: "https://github.com/ghellwig/cmssw"               # for faster testing
    button_classifier: class_button
    label_info: errorOutput
    log_console: log_console
    label_result: result_label
    layout_pie_chart: pie_chart
    layout_diagram1: dia1
    layout_diagram2: dia2
    layout_diagram3: dia3

    ########################
    # Menu
    ########################

    ActionBar:
        size_hint: None, None
        size: root.width, 30
        #background_normal: ''
        #background_down: ''
        background_image: ''
        background_color: (41/255), (105/255), (176/255), 1

        ActionView:
            use_separator: True
            background_color: [1, 0, 0, 1]
            ActionPrevious:
                title: ""
                with_previous: False
                app_icon: 'logo_small.png'

            ActionOverflow:
            ActionButton:
                text: "Settings"
                important: True
                on_press: root.show_settings()

            ActionButton:
                text: "Documentation"
                on_press: root.show_documentation()

            ActionButton:
                text: "Info"
                #icon: 'info-icon.png'
                on_press: root.show_info()





    #########################
    # upper area
    #########################

    BoxLayout:
        canvas.before:
                                                            #lines to optically separate sections
            #Color:
            #    rgba: 0, 0, 0, 0.5
            #Rectangle:
            #    pos: self.x, self.y-2
            #    size: self.width, 2
            #Rectangle:
            #    pos: self.x + self.width *.668 , self.y
            #    size: 2, self.height
            #Rectangle:
            #    pos: self.x, self.y + self.height -2
            #    size: self.width, 2
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.width, 1
            Rectangle:
                pos: self.x, self.y + self.height
                size: self.width, 1


        orientation: "horizontal"
        size_hint_y: .6

                                                            #entry area
        BoxLayout:
            orientation: "vertical"
            padding: 10

                                                            #entry: logo & button
            BoxLayout:
                orientation: "horizontal"

                Image:
                    pos_hint: {"center_y": .50}
                    source: 'logo.jpeg'
                    size_hint_x: 1.5
                    size_hint_y: 0.8


                BoxLayout:
                    orientation: "vertical"
                    padding: 5

                    Label:
                        size_hint_y: 1.5

                    Button:
                        id: class_button
                        text: "Classify"
                        size_hint: .8, .6
                        pos_hint: {"right": 1}
                        # on_press: root.classify_button_pressed_example()
                        on_press: root.classify_button_pressed()

                                                            #entry: URL Input & paste button
            BoxLayout:
                orientation: "horizontal"
                size_hint: 1, None
                size: self.width, 30
                spacing: 5

                Label:
                    text: "URL:"
                    size_hint_x: .1
                TextInput:
                    id: urlInput
                    size_hint: .9, None
                    size: self.width, 30
                    cursor_color: 0, 0, 0, 1
                    multiline: False
                    hint_text: "Paste the full URL of the main branch here, e.g. https://github.com/kivy/kivy"
                    # text: "https://github.com/ghellwig/cmssw"

                Button:
                    text: "Paste"
                    size_hint_x: .1
                    on_release: root.paste()

                                                            #entry: errorLabel
            BoxLayout:
                orientation: "horizontal"
                size_hint: 1, None
                size: self.width, 60

                Label:                                      #spacer
                    size_hint_x: .1
                Label:
                    id: errorOutput
                    text: """Press the "Classify" button to Start"""
                    size_hint: .9, None
                    size: self.width, 60
                    #color: 1, 0, 0, 1                      #red color
                    canvas.before:
                        Color:
                            rgba:
                                1, 1, 1, .5
                        Rectangle:
                            pos: self.x, self.y + (self.height * .5 / 2)
                            size: self.width , self.height * .5


                                                            #result
        BoxLayout:
            orientation: "vertical"
            size_hint_x: .5
            canvas.before:
                Color:
                    rgba:
                        1, 1, 1, 1
                Rectangle:
                    pos: self.pos
                    size: 1, self.height
            Label:
                id: result_label
                text: "Result"
                font_size: 32
                size_hint_y: .4
            BoxLayout:
                id: pie_chart
#                    AnchorLayout:
#                        id: anim_box




    #########################
    # lower area
    #########################
    TabbedPanel:
        do_default_tab: False
        #tab_pos: 'top_mid'
        tab_width_hint: 150
        TabbedPanelItem:
            text: "Wordcloud"
            BoxLayout:
                id: dia1
                Label:
                    text: "insert diagram here (1)"

        TabbedPanelItem:
            text: "Diagram 2"
            BoxLayout:
                id: dia2
                Label:
                    text: "insert diagram here (2)"

        TabbedPanelItem:
            text: "Diagram 3"
            BoxLayout:
                id: dia3
                Label:
                    text: "insert diagram here (3)"


        TabbedPanelItem:
            text: "Console"
            BoxLayout:
                orientation: "vertical"

                CodeInput:
                    id: log_console
                    text: ""
                    # disabled: True
                Button:
                    size_hint: 0.5, 0.1
                    pos_hint: {"center_x": 0.5}
                    text: "Save log to file"
                    on_press: root.save_log()

<AnimWidget@Widget>:
    canvas:
        Color:
            # rgba: 0.7, 0.3, 0.9, 1
            rgba: (106 / 255), (150 / 255), (200 / 255), 1
        Rectangle:
            pos: self.pos
            size: self.size
    size_hint: None, None
    size: 400, 30  #    size: 400, 30